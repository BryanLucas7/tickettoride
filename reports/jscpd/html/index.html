<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Copy/Paste Detector Report</title><link href="styles/tailwind.css" rel="stylesheet"><link href="styles/prism.css" rel="stylesheet"></head><body class="bg-gray-100"><header class="bg-white shadow py-4"><div class="container mx-auto px-4"><h1 class="text-3xl font-semibold text-gray-800">jscpd - copy/paste report</h1></div></header><main class="container mx-auto my-8 p-4 bg-white shadow rounded"><section class="mb-8" id="dashboard"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Dashboard</h2><div class="grid grid-cols-4 gap-4"><div class="bg-blue-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-blue-800 mb-2">Total Files</h3><span class="text-4xl font-bold text-blue-800">149</span></div><div class="bg-green-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-green-800 mb-2">Total Lines of Code</h3><span class="text-4xl font-bold text-green-800">18107</span></div><div class="bg-yellow-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-yellow-800 mb-2">Number of Clones</h3><span class="text-4xl font-bold text-yellow-800">10</span></div><div class="bg-red-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-red-800 mb-2">Duplicated Lines</h3><span class="text-4xl font-bold text-red-800">175 (0.97%)</span></div></div></section><section class="mb-8" id="formats"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Formats with Duplications</h2><table class="w-full table-auto"><thead><tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal"><th class="py-3 px-6 text-left">Format</th><th class="py-3 px-6 text-left">Files</th><th class="py-3 px-6 text-left">Lines</th><th class="py-3 px-6 text-left">Clones</th><th class="py-3 px-6 text-left">Duplicated Lines</th><th class="py-3 px-6 text-left">Duplicated Tokens</th></tr></thead><tbody><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#typescript-clones">typescript</a></td><td class="py-3 px-6">15</td><td class="py-3 px-6">2217</td><td class="py-3 px-6">3</td><td class="py-3 px-6">33</td><td class="py-3 px-6">302</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#javascript-clones">javascript</a></td><td class="py-3 px-6">19</td><td class="py-3 px-6">1723</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#tsx-clones">tsx</a></td><td class="py-3 px-6">19</td><td class="py-3 px-6">3546</td><td class="py-3 px-6">2</td><td class="py-3 px-6">25</td><td class="py-3 px-6">380</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#python-clones">python</a></td><td class="py-3 px-6">96</td><td class="py-3 px-6">10621</td><td class="py-3 px-6">5</td><td class="py-3 px-6">117</td><td class="py-3 px-6">537</td></tr></tbody></table></section><section class="mb-8" id="txt-clones"><a name="typescript-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">typescript</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">/home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/frontend/hooks/game/useRouteConquest.ts (Line 176:2 - Line 187:37), /home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/frontend/hooks/game/useTicketFlow.ts (Line 87:6 - Line 98:28)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup1"><code class="language-typescript text-sm text-gray-800">)
        
        await buscarEstadoJogo(gameId)
        
        setTimeout(() =&gt; {
          setMensagem(`üîÑ Turno completo! Vez do jogador ${data.next_player}`)
          setTimeout(async () =&gt; {
            await buscarEstadoJogo(gameId)
          }, 2000)
        }, 2000)
      } else {
        setMensagem(`‚ùå ${data.message || &quot;N√£o foi poss√≠vel conquistar a rota&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/frontend/hooks/game/useCardPurchase.ts (Line 188:87 - Line 203:39), /home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/frontend/hooks/game/useCardPurchase.ts (Line 106:9 - Line 121:42)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup2"><code class="language-typescript text-sm text-gray-800">)
      }

      await buscarEstadoJogo(gameId)

      if (turnoFinalizado) {
        setTimeout(() =&gt; {
          setMensagem(`üîÑ Turno completo! Vez do jogador ${data.next_player}`)
          setTimeout(async () =&gt; {
            await buscarEstadoJogo(gameId)
          }, 2000)
        }, 1500)
      }
    } catch (error) {
      if (error instanceof ApiError) {
        const detalhe = error.message || &quot;N√£o foi poss√≠vel comprar esta carta.&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">/home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/frontend/hooks/useGameEngine.ts (Line 91:3 - Line 98:13), /home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/frontend/hooks/game/types.ts (Line 90:3 - Line 96:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup4"><code class="language-typescript text-sm text-gray-800">iniciarFluxoBilhetes: () =&gt; Promise&lt;void&gt;
  confirmarBilhetes: () =&gt; Promise&lt;void&gt;
  toggleBilheteSelecionado: (index: number, minimo?: number) =&gt; void
  cancelarFluxoBilhetes: () =&gt; void
  setMostrarModalBilhetes: React.Dispatch&lt;React.SetStateAction&lt;boolean&gt;&gt;
  setBilhetesSelecionados: React.Dispatch&lt;React.SetStateAction&lt;number[]&gt;&gt;
  
  // Navega√ß√£o</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="javascript-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">javascript</h2><div class="divide-y divide-gray-200 border-b-2"><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="tsx-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">tsx</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">/home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/frontend/features/game/components/ContadorTrens.tsx (Line 40:1 - Line 54:2), /home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/frontend/features/game/components/TelaFimJogo.tsx (Line 61:1 - Line 75:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup0"><code class="language-tsx text-sm text-gray-800">}

/**
 * Mapa de cores CSS
 */
const CORES_JOGADORES: Record&lt;string, { bg: string, text: string, border: string }&gt; = {
    red: { bg: 'bg-red-100', text: 'text-red-800', border: 'border-red-500' },
    blue: { bg: 'bg-blue-100', text: 'text-blue-800', border: 'border-blue-500' },
    green: { bg: 'bg-green-100', text: 'text-green-800', border: 'border-green-500' },
    yellow: { bg: 'bg-yellow-100', text: 'text-yellow-800', border: 'border-yellow-500' },
    purple: { bg: 'bg-purple-100', text: 'text-purple-800', border: 'border-purple-500' },
    orange: { bg: 'bg-orange-100', text: 'text-orange-800', border: 'border-orange-500' },
    pink: { bg: 'bg-pink-100', text: 'text-pink-800', border: 'border-pink-500' },
    teal: { bg: 'bg-teal-100', text: 'text-teal-800', border: 'border-teal-500' },
}</code></pre></div><div class="py-4"><p class="text-gray-600">/home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/frontend/app/bilhetes-destino/page.tsx (Line 134:7 - Line 145:6), /home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/frontend/app/setup/page.tsx (Line 57:5 - Line 68:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup3"><code class="language-tsx text-sm text-gray-800">const isCodespace = window.location.hostname.includes('app.github.dev')
      const backendPort = '8000'
      
      let backendUrl
      if (isCodespace) {
        const baseUrl = window.location.hostname.replace(/-300[0-9]/, `-${backendPort}`)
        backendUrl = `${window.location.protocol}//${baseUrl}`
      } else {
        backendUrl = `http://localhost:${backendPort}`
      }
      
      const</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="python-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">python</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">/home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/backend/app/core/domain/entities/jogo_compras_service.py (Line 98:13 - Line 108:2), /home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/backend/app/core/domain/entities/jogo_compras_service.py (Line 44:2 - Line 55:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup5"><code class="language-python text-sm text-gray-800">)

        # Edge case: se n√£o h√° mais cartas poss√≠veis para compra, encerra turno automaticamente
        if not self.jogo.estadoCompraCartas.turnoCompleto and not self._ha_opcao_de_compra():
            self.jogo.estadoCompraCartas.turnoCompleto = True

        return success_response(
            self.jogo.estadoCompraCartas.obterMensagemStatus(),
            carta=format_card(carta),
            cartasCompradas=self.jogo.estadoCompraCartas.cartasCompradas,
            turnoCompleto=self.jogo.estadoCompraCartas.turnoCompleto,</code></pre></div><div class="py-4"><p class="text-gray-600">/home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/backend/app/services/route_conquest_service.py (Line 22:2 - Line 68:73), /home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/backend/app/application/services/route_conquest_service.py (Line 27:2 - Line 73:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup6"><code class="language-python text-sm text-gray-800">..shared.exception_handlers import handle_validation_errors


class RouteConquestService:
    &quot;&quot;&quot;
    Servi√ßo respons√°vel por conquista de rotas.
    
    Coordena busca de cartas, valida√ß√£o, conquista via controller
    e passagem de turno autom√°tica.
    &quot;&quot;&quot;
    
    def __init__(self, game_action_service: GameActionService = None):
        &quot;&quot;&quot;
        Inicializa o servi√ßo.
        
        Args:
            game_action_service: Service para passar turno e verificar fim
        &quot;&quot;&quot;
        self.game_action_service = game_action_service or GameActionService()
    
    @handle_validation_errors
    def conquistar_rota(
        self,
        jogo: Jogo,
        jogador: Jogador,
        rota_id: str,
        cartas_usadas_cores: List[str]
    ) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Conquista uma rota no tabuleiro.
        
        Args:
            jogo: Inst√¢ncia do jogo
            jogador: Jogador que est√° conquistando
            rota_id: ID da rota a ser conquistada
            cartas_usadas_cores: Lista de cores das cartas usadas (strings)
            
        Returns:
            Dicion√°rio com resultado da conquista e informa√ß√µes de turno
            
        Raises:
            HTTPException: Se rota n√£o existir, cartas forem inv√°lidas, etc.
        &quot;&quot;&quot;
        # 1. Buscar rota pelo ID usando validador centralizado
        rota = GameValidators.buscar_rota(jogo, rota_id)
        
        # 2. Buscar e remover cartas da m√£o do jogador usando m√©todo encapsulado</code></pre></div><div class="py-4"><p class="text-gray-600">/home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/backend/app/services/route_conquest_service.py (Line 78:16 - Line 108:40), /home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/backend/app/application/services/route_conquest_service.py (Line 136:13 - Line 165:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup7"><code class="language-python text-sm text-gray-800">)
    
    def _executar_conquista(
        self,
        jogo: Jogo,
        jogador: Jogador,
        rota: Rota,
        cartas_usadas: List[CartaVagao]
    ) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Executa a conquista da rota via controller.
        
        Args:
            jogo: Inst√¢ncia do jogo
            jogador: Jogador conquistando
            rota: Rota a conquistar
            cartas_usadas: Cartas usadas na conquista
            
        Returns:
            Resultado da conquista
            
        Raises:
            HTTPException: Se conquista falhar
        &quot;&quot;&quot;
        # Garantir que descarte manager existe
        descarte_manager = jogo.descarteManager or DescarteManager()
        
        # Obter ou criar gerenciador de fim de jogo (m√©todo movido para Jogo)
        gerenciador_fim_jogo = jogo.obter_ou_criar_gerenciador_fim()
        
        # Criar controller e executar conquista</code></pre></div><div class="py-4"><p class="text-gray-600">/home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/backend/app/services/route_conquest_service.py (Line 127:13 - Line 146:7), /home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/backend/app/application/services/route_conquest_service.py (Line 201:13 - Line 220:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup8"><code class="language-python text-sm text-gray-800">raise HTTPException(status_code=400, detail=resultado_normalizado[&quot;message&quot;])
        
        return resultado
    
    def _formatar_resposta(
        self,
        resultado_conquista: Dict[str, Any],
        resultado_turno: Dict[str, Any]
    ) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;
        Formata resposta consolidada.
        
        Args:
            resultado_conquista: Resultado da conquista
            resultado_turno: Resultado da passagem de turno
            
        Returns:
            Dicion√°rio formatado para resposta da API
        &quot;&quot;&quot;
        from ..shared</code></pre></div><div class="py-4"><p class="text-gray-600">/home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/backend/tests/test_repositories.py (Line 143:16 - Line 155:18), /home/bryan/Projetos/Projetos/Ticket to Ride Engenharia de Software/backend/tests/test_repositories.py (Line 43:2 - Line 55:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup9"><code class="language-python text-sm text-gray-800">)
        jogo1 = Jogo(id=1)
        jogo2 = Jogo(id=2)
        
        repo.salvar(jogo1)
        repo.salvar(jogo2)
        jogos = repo.listar()
        
        assert len(jogos) == 2
        assert any(j.id == 1 for j in jogos)
        assert any(j.id == 2 for j in jogos)
    
    def test_deletar_jogo</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div></section><!-- Add more sections for other formats and clone groups as needed--></main><footer class="bg-white shadow mt-8 py-4"><div class="container mx-auto px-4 text-center"><p class="text-sm text-gray-600">This report is generated by jscpd, an open-source copy/paste detector.</p><p class="text-sm text-gray-600">jscpd is licensed under the MIT License.</p><a class="text-blue-500 text-sm" href="https://github.com/kucherenko/jscpd" target="_blank" rel="noopener noreferrer">View jscpd on GitHub</a></div></footer><script src="js/prism.js"></script><script>function toggleCodeBlock(codeBlockId, expandBtnId, collapseBtnId) {
  const codeBlock = document.getElementById(codeBlockId);
  const expandBtn = document.getElementById(expandBtnId);
  const collapseBtn = document.getElementById(collapseBtnId);

  codeBlock.classList.toggle('hidden');
  expandBtn.classList.toggle('hidden');
  collapseBtn.classList.toggle('hidden');
}</script></body></html>